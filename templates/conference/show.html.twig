{% extends 'base.html.twig' %}

{% block title %}Conference Guestbook - {{ conference }}{% endblock %}

{% block body %}
<div class="container mx-auto px-4 py-8">
    <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">{{ conference }} Conference</h2>

    {% if comments|length > 0 %}
        <div class="text-center text-lg text-gray-600 mb-4">
            There are <span class="font-semibold text-gray-800">{{ comments|length }}</span> comments.
        </div>
        <div class="space-y-6">
            {% for comment in comments %}
                <div class="bg-white shadow rounded-lg p-6 border border-gray-200">
                    {% if comment.photofilename %}
                        <img 
                            src="{{ asset('uploads/photos/' ~ comment.photofilename) }}" 
                            alt="User Photo" 
                            class="w-16 h-16 rounded-full mx-auto mb-4 object-cover"
                        />
                    {% endif %}
                    <h4 class="text-lg font-semibold text-gray-800 text-center">{{ comment.author }}</h4>
                    <small class="block text-sm text-gray-500 text-center">{{ comment.createdAt|format_datetime('medium', 'short') }}</small>
                    <p class="mt-4 text-gray-700 text-center">{{ comment.text }}</p>
                </div>
            {% endfor %}
        </div>

        <div class="flex justify-between items-center mt-8">
            {% if previous >= 0 %}
                <a href="{{ path('conference', { id: conference.id, offset: previous }) }}"
                   class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md shadow hover:bg-gray-200 transition">
                    Previous
                </a>
            {% else %}
                <span></span>
            {% endif %}

            {% if next < comments|length %}
                <a href="{{ path('conference', { id: conference.id, offset: next }) }}"
                   class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md shadow hover:bg-gray-200 transition">
                    Next
                </a>
            {% else %}
                <span></span>
            {% endif %}
        </div>
    {% else %}
        <div class="text-center text-gray-600 text-lg">
            No comments have been posted yet for this conference.
        </div>
    {% endif %}
</div>
{% endblock %}
